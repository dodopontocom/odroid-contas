version: 2.1

jobs:
  blint:
    machine: true
    steps:
      - checkout
      - run:
          name: "Shell Lint"
          command: |
              echo "[$(cat ${CIRCLE_WORKING_DIRECTORY}/functions/*.sh | grep -E "^[a-z].*\(\)" | cut -d'(' -f1 | wc -l) function(s) found]"
              echo "Trying to test example function 'helper.random'..."
              helper_random=$(cat ${CIRCLE_WORKING_DIRECTORY}/functions/*.sh | grep -E "helper\.random"
              awk '/"${helper_random}"/,/^\}/' ${CIRCLE_WORKING_DIRECTORY}/functions/helper.sh
workflows:
  version: 2.1
  
  Bot-shell-lint:
    jobs:
      - blint:
          filters:
            branches:
              only: dev-v3
